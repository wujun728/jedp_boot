<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
    "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	<!-- 引入XFire预配置信息 -->
	<import resource="classpath:org/codehaus/xfire/spring/xfire.xml" />
	<!-- 定义访问的url -->
	<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="urlMap">
			<map>
				<entry key="/HelloWorldService.ws">
					<ref bean="HelloWorldService" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="domInHandler" class="org.codehaus.xfire.util.dom.DOMInHandler" />

	<bean id="wss4jInHandlerEncSign" class="org.codehaus.xfire.security.wss4j.WSS4JInHandler">
		<property name="properties">
			<props>
				<prop key="action">Encrypt</prop>
				<!-- <prop key="action">UsernameToken</prop> --><!-- //使用用户名与密码进行安全验证 -->
				<prop key="passwordCallbackClass">webservice.core.PasswordHandler</prop>
				<!-- ②组合动作用空格分隔 -->
				<!-- <prop key="decryptionPropFile"> ③-1解密须使用server的私钥，属性文件必须提供 访问密钥库中私钥的相关配置 
					com/baobaotao/xfire/wss4j/server/insecurity_enc.properties </prop> <prop 
					key="passwordCallbackClass"> ③-2密码回调实现类 com.baobaotao.xfire.wss4j.server.PasswordHandler 
					</prop> ④验证签名须使用client数字证书，属性文件需要提供访问密钥库client数字证书的配置 <prop key="signaturePropFile"> 
					com/baobaotao/xfire/wss4j/server/insecurity_sign.properties </prop> -->
			</props>
		</property>
	</bean>
	<bean id="myInHandlerEncSign" class="com.mypack.XfireAuthenticationHandler">
	</bean>
	<bean id="domOutHandler" class="org.codehaus.xfire.util.dom.DOMOutHandler"></bean>
	<bean id="wss4jOutHandlerEnc2Way" class="org.codehaus.xfire.security.wss4j.WSS4JOutHandler">
		<property name="properties">
			<props>
				<prop key="action">Encrypt</prop>
				<prop key="encryptionUser">client</prop>
				<!-- <prop key="encryptionPropFile"> com/baobaotao/xfire/wss4j/server/outsecurity_enc.properties 
					</prop> -->
			</props>
		</property>
	</bean>
	<!-- 使用XFire导出器 -->
	<bean id="baseWebService" class="org.codehaus.xfire.spring.remoting.XFireExporter"
		lazy-init="false" abstract="true">
		<!-- 引用xfire.xml中定义的工厂 -->
		<property name="serviceFactory" ref="xfire.serviceFactory" />
		<!-- 引用xfire.xml中的xfire实例 -->
		<property name="xfire" ref="xfire" />
		<property name="inHandlers">
			<list>
				<ref bean="domInHandler" />
				<!-- <ref bean="wss4jInHandlerEncSign" /> -->
				<ref bean="myInHandlerEncSign" />
			</list>
		</property>
		<property name="outHandlers">
			<!-- ②对响应SOAP报文进行加密处理 -->
			<list>
				<ref bean="domOutHandler" />
				<!-- <ref bean="wss4jOutHandlerEnc2Way" /> -->
			</list>
		</property>
	</bean>
	<bean id="HelloWorldService" parent="baseWebService">
		<!-- 业务服务bean -->
		<property name="serviceBean" ref="HelloWorldBean" />
		<!-- 业务服务bean的窄接口类 -->
		<property name="serviceClass" value="webservice.HelloWorld" />
	</bean>
</beans>